<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm" role="navigation" aria-label="Main navigation">
	<div class="container">
		<div class="d-flex justify-content-between align-items-center w-100">
			<a href="{{ path('post_index') }}" class="navbar-brand m-0" aria-label="Home">
				<h1 class="h4 m-0">
					{% include 'components/_app_name.html.twig' %}
				</h1>
			</a>
			<div class="ms-auto d-flex align-items-center gap-4">
				<a href="{{ path('post_index') }}" class="nav-icon-link" aria-label="Home" title="Home">
					<i class="fa-solid fa-house gradient-text" aria-hidden="true"></i>
				</a>

				{# Profile Preview Button #}
				<div class="dropdown">
					<button class="btn p-0 border-0 d-flex align-items-center gap-2" 
					        data-bs-toggle="dropdown" 
					        aria-expanded="false"
					        aria-label="User menu"
					        aria-haspopup="true">
						{% if app.user.profilePicture %}
							<img src="{{ vich_uploader_asset(app.user, 'profilePictureFile') }}" alt="Profile" class="nav-profile-pic">
						{% else %}
							<div class="nav-profile-placeholder">
								{{ app.user.firstName|first|upper }}{{ app.user.lastName|first|upper }}
							</div>
						{% endif %}
						<span class="d-none d-md-inline gradient-text">{{ app.user.firstName }}</span>
						<i class="fa-solid fa-bars gradient-text ms-2 nav-icon"></i>
					</button>

					<ul class="dropdown-menu dropdown-menu-end" role="menu" aria-label="User menu">
						<li role="none">
							<a class="dropdown-item" href="{{ path('app_profile', {id: app.user.id}) }}" role="menuitem">
								<i class="fa-solid fa-user me-2 gradient-text" aria-hidden="true"></i>
								<span class="gradient-text">Profile</span>
							</a>
						</li>
						{% if is_granted('ROLE_ADMIN') %}
							<li role="none">
								<a class="dropdown-item" href="{{ path('admin_dashboard') }}" role="menuitem">
									<i class="fa-solid fa-gauge me-2 gradient-text" aria-hidden="true"></i>
									<span class="gradient-text">Admin Dashboard</span>
								</a>
							</li>
						{% endif %}
						<li><hr class="dropdown-divider" role="separator"></li>
						<li role="none">
							<a class="dropdown-item" href="{{ path('app_logout') }}" role="menuitem">
								<i class="fa-solid fa-right-from-bracket me-2 gradient-text" aria-hidden="true"></i>
								<span class="gradient-text">Log out</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</nav>
