<turbo-frame id="post-content-{{ post.id }}">
	<form action="{{ path('post_update', {id: post.id}) }}" 
	      method="post" 
	      enctype="multipart/form-data"
	      data-controller="form"
	      data-action="turbo:submit-start->form#disableSubmit turbo:submit-end->form#enableSubmit"
	      class="edit-post-form p-2">
		<div class="mb-3">
			<textarea name="text" class="form-control border-0" rows="4" placeholder="What's on your mind?" style="font-size: 1rem; resize: none;" required>{{ post.text }}</textarea>
		</div>

		{% if post.imageName %}
			<div class="current-image mb-3 position-relative">
				<img src="{{ vich_uploader_asset(post, 'imageFile') }}" class="rounded img-fluid" style="max-height: 300px; width: 100%; object-fit: cover;">
				<a href="{{ path('post_remove_image', {id: post.id}) }}" 
				   data-turbo-method="post"
				   data-turbo-frame="post-content-{{ post.id }}"
				   class="btn-remove-image">
					<i class="fas fa-times"></i>
				</a>
			</div>
		{% else %}
			<div class="upload-area mb-3" 
			     data-controller="image-preview"
			     data-action="click->image-preview#openFileDialog dragenter->image-preview#highlight dragover->image-preview#highlight dragleave->image-preview#unhighlight drop->image-preview#handleDrop">
				<input type="file" 
				       name="image" 
				       accept="image/*" 
				       class="hidden-file-input"
				       data-image-preview-target="input"
				       data-action="change->image-preview#handleFileSelect">
				<div class="upload-area-inner">
					<div class="upload-area-content text-center" data-image-preview-target="uploadPrompt">
						<i class="fas fa-image mb-2"></i>
						<p class="mb-0">Click to add an image</p>
					</div>
					<div class="preview-container d-none" data-image-preview-target="previewContainer">
						<img data-image-preview-target="preview" src="#" alt="Preview" class="rounded img-fluid" style="max-height: 300px; width: 100%; object-fit: cover;">
						<button type="button" class="btn-remove-image" data-action="click->image-preview#removeImage">
							<i class="fas fa-times"></i>
						</button>
					</div>
				</div>
			</div>
		{% endif %}

		<div class="d-flex justify-content-end gap-2">
			<a href="{{ path('app_post') }}" class="btn btn-light">Cancel</a>
			<button type="submit" class="btn btn-gradient" data-form-target="submit">
				<i class="fas fa-save me-2"></i>Save Changes
			</button>
		</div>
	</form>
</turbo-frame>
